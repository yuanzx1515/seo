{
  "openapi": "3.0.3",
  "info": {
    "title": "智联招聘发布模块 API",
    "version": "1.0.0",
    "description": "供 Apifox 导入的接口文档，涵盖前端 `ZhaopinPublish.vue` 所需的全部后台接口。所有接口均返回统一响应结构：`{ code, message, data }`，其中 `code=200` 表示成功。"
  },
  "servers": [
    {
      "url": "http://localhost:8080/api",
      "description": "本地开发环境"
    }
  ],
  "components": {
    "schemas": {
      "BaseResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "example": 200
          },
          "message": {
            "type": "string",
            "example": "操作成功"
          },
          "data": {
            "type": "object"
          }
        }
      },
      "Moment": {
        "type": "object",
        "properties": {
          "id": { "type": "integer", "example": 66024057 },
          "content": { "type": "string" },
          "images": {
            "type": "array",
            "items": { "type": "string", "format": "uri" }
          },
          "createdTime": { "type": "string", "example": "2025-11-09 07:04:12.480505" },
          "createdTimeShow": { "type": "string", "example": "刚刚" },
          "likeNum": { "type": "integer" },
          "commentNum": { "type": "integer" },
          "readNum": { "type": "integer" },
          "status": { "type": "integer", "description": "平台原始状态，1=正常" }
        }
      },
      "MomentList": {
        "type": "object",
        "properties": {
          "list": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/Moment" }
          },
          "total": { "type": "integer" },
          "page": { "type": "integer" },
          "pageSize": { "type": "integer" }
        }
      },
      "Group": {
        "type": "object",
        "properties": {
          "id": { "type": "integer", "example": 1 },
          "name": { "type": "string", "example": "校园招聘组" },
          "description": { "type": "string", "nullable": true },
          "createdAt": { "type": "string", "example": "2024-03-18 10:00:00" },
          "linkCount": { "type": "integer", "example": 12 }
        }
      },
      "Link": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "groupId": { "type": "integer" },
          "url": { "type": "string", "format": "uri" },
          "dynamicId": { "type": "string", "example": "66024057" },
          "publishedAt": { "type": "string" },
          "publishedAtShow": { "type": "string" },
          "lastCheckedAt": { "type": "string", "nullable": true },
          "lastCheckedAtShow": { "type": "string", "nullable": true },
          "status": {
            "type": "string",
            "enum": ["pending", "valid", "invalid"],
            "description": "pending=检测中，valid=有效，invalid=无效"
          },
          "reason": { "type": "string", "description": "最近一次检测说明" },
          "isValid": { "type": "boolean" }
        }
      },
      "GroupList": {
        "type": "object",
        "properties": {
          "list": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/Group" }
          }
        }
      },
      "LinkList": {
        "type": "object",
        "properties": {
          "list": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/Link" }
          }
        }
      }
    },
    "responses": {
      "Success": {
        "description": "成功响应",
        "content": {
          "application/json": {
            "schema": { "$ref": "#/components/schemas/BaseResponse" }
          }
        }
      }
    }
  },
  "paths": {
    "/seo/zhaopin/publish": {
      "post": {
        "summary": "发布智联动态",
        "description": "将内容同步到智联招聘，需要携带 Cookie 以完成真实请求。",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["content", "cookie"],
                "properties": {
                  "content": { "type": "string", "maxLength": 2000 },
                  "images": {
                    "type": "array",
                    "items": { "type": "string", "format": "uri" },
                    "description": "上传后的图片 URL 列表，最多 9 张"
                  },
                  "cookie": {
                    "type": "string",
                    "description": "来自智联招聘已登录账号的 Cookie"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "发布成功",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    { "$ref": "#/components/schemas/BaseResponse" },
                    {
                      "type": "object",
                      "properties": {
                        "data": {
                          "type": "object",
                          "properties": {
                            "moment": { "$ref": "#/components/schemas/Moment" },
                            "taskId": { "type": "string", "example": "task_1710745500000" }
                          }
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/seo/zhaopin/moments": {
      "get": {
        "summary": "获取已发布动态列表",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": { "type": "integer", "default": 1 }
          },
          {
            "name": "pageSize",
            "in": "query",
            "schema": { "type": "integer", "default": 10 }
          }
        ],
        "responses": {
          "200": {
            "description": "列表返回",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    { "$ref": "#/components/schemas/BaseResponse" },
                    {
                      "type": "object",
                      "properties": {
                        "data": { "$ref": "#/components/schemas/MomentList" }
                      }
                    }
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/seo/zhaopin/moment/{id}": {
      "delete": {
        "summary": "删除动态",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" }
          }
        ],
        "responses": {
          "200": {
            "description": "删除成功",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/BaseResponse" }
              }
            }
          }
        }
      }
    },
    "/seo/zhaopin/groups": {
      "get": {
        "summary": "获取分组列表",
        "responses": {
          "200": {
            "description": "分组数据",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    { "$ref": "#/components/schemas/BaseResponse" },
                    {
                      "type": "object",
                      "properties": {
                        "data": { "$ref": "#/components/schemas/GroupList" }
                      }
                    }
                  ]
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "创建分组",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["name"],
                "properties": {
                  "name": { "type": "string", "minLength": 2, "maxLength": 20 },
                  "description": { "type": "string", "maxLength": 50 }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "创建成功",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    { "$ref": "#/components/schemas/BaseResponse" },
                    {
                      "type": "object",
                      "properties": {
                        "data": { "$ref": "#/components/schemas/Group" }
                      }
                    }
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/seo/zhaopin/groups/{id}": {
      "delete": {
        "summary": "删除分组",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" }
          }
        ],
        "responses": {
          "200": {
            "description": "删除成功",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/BaseResponse" }
              }
            }
          }
        }
      }
    },
    "/seo/zhaopin/groups/{groupId}/links": {
      "get": {
        "summary": "获取分组下的动态链接",
        "parameters": [
          {
            "name": "groupId",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" }
          }
        ],
        "responses": {
          "200": {
            "description": "链接列表",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    { "$ref": "#/components/schemas/BaseResponse" },
                    {
                      "type": "object",
                      "properties": {
                        "data": { "$ref": "#/components/schemas/LinkList" }
                      }
                    }
                  ]
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "手动添加动态链接到分组",
        "parameters": [
          {
            "name": "groupId",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["url", "dynamicId"],
                "properties": {
                  "url": { "type": "string", "format": "uri" },
                  "dynamicId": { "type": "string", "pattern": "^\\d+$" },
                  "publishedAt": { "type": "string", "format": "date-time" }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "添加成功",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    { "$ref": "#/components/schemas/BaseResponse" },
                    {
                      "type": "object",
                      "properties": {
                        "data": { "$ref": "#/components/schemas/Link" }
                      }
                    }
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/seo/zhaopin/links/check": {
      "post": {
        "summary": "检测单条动态链接有效性",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["linkId"],
                "properties": {
                  "linkId": { "type": "integer" }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "检测结果",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    { "$ref": "#/components/schemas/BaseResponse" },
                    {
                      "type": "object",
                      "properties": {
                        "data": { "$ref": "#/components/schemas/Link" }
                      }
                    }
                  ]
                }
              }
            }
          }
        }
      }
    }
  }
}
